Introduction
============

This repository contains the original source code for Acorn Dmos Basic.

The structure of the repository is as follows:

    original_sources.zip
              - a copy of the original Dmos Basic source files,
                with the original <cr> line endings.

    dfs/      - disk images in DFS (ssd and dsd) formats;
                these are generated by the make_disk_images.sh script
                which uses SWEH's Perl mmb_utils.

    src/      - the Dmos Basic source files (with unix line endings)

    tools/    - binaries for MASM (both DFS and non-DFS versions)

Assembling the OS Source Code
=============================

An "ordinary" 6502 Co Processor is needed to assemble the Dmos Basic
sources.

The source code is in Acorn MASM format, and a copy of the "Normal"
version of MASM is included in the disk images.

Using DFS:
==========

(or MMFS)

The disk organization on DFS involves two disk images:
- drive 0: Tools (MASM) and Working files
- drive 2: Dmos Basic sources

In the dfs/ directory are following versions:

Two seperate single sided disk images:
    ssd/AcornDmosBasic_disk0.ssd
    ssd/AcornDmosBasic_disk2.ssd

One double-sided disk image:
    dsd/AcornDmosBasic_disk02.dsd

Transfer one of these disk image sets onto your physical hardware.

To assemble the sources, you just need to boot disk 0 (it contains an
appropriate !BOOT file)

The Basic binaries are generated on DRIVE 0 (two files):

$.DBasObj
    (this has a MD5SUM of 817464a11c9a088996f800ccaa4e46cc)

Notes
=====

So, exactly which version of BBC Basic is this?

The copyright string is "(C) 1985 Acorn" and the Version is 04. This
combination doesn't match any known release of 6502 Basic.

This appears to be a development version prior to Basic 4.30.

There is a COMMENT file in the sources directory that lists numerout
changes to the trig and maths functions. So this is well on the way to
being Basic 4.30.

But it doesn't yet include the ROM service call handler, so the binary
is very different.

More investigation is needed here.
